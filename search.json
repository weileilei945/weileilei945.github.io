[{"title":"场景端新项目的开发","url":"http://weileilei.top/场景端新项目的开发/","content":"<p>今天到金融的场景端这里来做新的项目，这个项目可以从零开发，每次的从零开发都会学到不少新的知识。（心中有小小的期待）<br>ps：清明回家的火车票买好了</p>\n","categories":[],"tags":["前端"]},{"title":"烟花动画","url":"http://weileilei.top/烟花动画/","content":"<p>看到了一个同学分享的烟花动画，感觉效果还可以，记录下来有空学习学习。<br>HTML:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">onload</span>=<span class=\"string\">\"init()\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"background: #000\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">\"canvas\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"position:fixed;top:0;left:0;width:100%;overflow:hidden;z-index:-9999;\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>JS:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// when animating on canvas, it is best to use requestAnimationFrame instead of setTimeout or setInterval</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// not supported in all browsers though and sometimes needs a prefix, so we need a shim</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.requestAnimFrame = ( <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"built_in\">window</span>.requestAnimationFrame ||</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">window</span>.webkitRequestAnimationFrame ||</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">window</span>.mozRequestAnimationFrame ||</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> callback </span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t<span class=\"built_in\">window</span>.setTimeout( callback, <span class=\"number\">1000</span> / <span class=\"number\">60</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// now we will setup our basic variables for the demo</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.getElementById( <span class=\"string\">'canvas'</span> ),</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tctx = canvas.getContext( <span class=\"string\">'2d'</span> ),</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// full screen dimensions</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\tcw = <span class=\"built_in\">window</span>.innerWidth,</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tch = <span class=\"built_in\">window</span>.innerHeight,</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// firework collection</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\tfireworks = [],</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// particle collection</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\tparticles = [],</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// starting hue</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\thue = <span class=\"number\">120</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// when launching fireworks with a click, too many get launched at once without a limiter, one launch per 5 loop ticks</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\tlimiterTotal = <span class=\"number\">5</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tlimiterTick = <span class=\"number\">0</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// this will time the auto launches of fireworks, one launch per 80 loop ticks</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\ttimerTotal = <span class=\"number\">80</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\t\ttimerTick = <span class=\"number\">0</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tmousedown = <span class=\"literal\">false</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// mouse x coordinate,</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\tmx,</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// mouse y coordinate</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\tmy;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// set canvas dimensions</span></span><br><span class=\"line\"></span><br><span class=\"line\">canvas.width = cw;</span><br><span class=\"line\"></span><br><span class=\"line\">canvas.height = ch;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// now we are going to setup our function placeholders for the entire demo</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get a random number within a range</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">random</span>(<span class=\"params\"> min, max </span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.random() * ( max - min ) + min;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// calculate the distance between two points</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculateDistance</span>(<span class=\"params\"> p1x, p1y, p2x, p2y </span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> xDistance = p1x - p2x,</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tyDistance = p1y - p2y;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.sqrt( <span class=\"built_in\">Math</span>.pow( xDistance, <span class=\"number\">2</span> ) + <span class=\"built_in\">Math</span>.pow( yDistance, <span class=\"number\">2</span> ) );</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// create firework</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Firework</span>(<span class=\"params\"> sx, sy, tx, ty </span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// actual coordinates</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.x = sx;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.y = sy;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// starting coordinates</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.sx = sx;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.sy = sy;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// target coordinates</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.tx = tx;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.ty = ty;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// distance from starting point to target</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.distanceToTarget = calculateDistance( sx, sy, tx, ty );</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.distanceTraveled = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// track the past coordinates of each firework to create a trail effect, increase the coordinate count to create more prominent trails</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.coordinates = [];</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.coordinateCount = <span class=\"number\">3</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// populate initial coordinate collection with the current coordinates</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">while</span>( <span class=\"keyword\">this</span>.coordinateCount-- ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.coordinates.push( [ <span class=\"keyword\">this</span>.x, <span class=\"keyword\">this</span>.y ] );</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.angle = <span class=\"built_in\">Math</span>.atan2( ty - sy, tx - sx );</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.speed = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.acceleration = <span class=\"number\">1.05</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.brightness = random( <span class=\"number\">50</span>, <span class=\"number\">70</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// circle target indicator radius</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.targetRadius = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// update firework</span></span><br><span class=\"line\"></span><br><span class=\"line\">Firework.prototype.update = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> index </span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// remove last item in coordinates array</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.coordinates.pop();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// add current coordinates to the start of the array</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.coordinates.unshift( [ <span class=\"keyword\">this</span>.x, <span class=\"keyword\">this</span>.y ] );</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// cycle the circle target indicator radius</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>( <span class=\"keyword\">this</span>.targetRadius &lt; <span class=\"number\">8</span> ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.targetRadius += <span class=\"number\">0.3</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.targetRadius = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// speed up the firework</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.speed *= <span class=\"keyword\">this</span>.acceleration;</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// get the current velocities based on angle and speed</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> vx = <span class=\"built_in\">Math</span>.cos( <span class=\"keyword\">this</span>.angle ) * <span class=\"keyword\">this</span>.speed,</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tvy = <span class=\"built_in\">Math</span>.sin( <span class=\"keyword\">this</span>.angle ) * <span class=\"keyword\">this</span>.speed;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// how far will the firework have traveled with velocities applied?</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.distanceTraveled = calculateDistance( <span class=\"keyword\">this</span>.sx, <span class=\"keyword\">this</span>.sy, <span class=\"keyword\">this</span>.x + vx, <span class=\"keyword\">this</span>.y + vy );</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// if the distance traveled, including velocities, is greater than the initial distance to the target, then the target has been reached</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>( <span class=\"keyword\">this</span>.distanceTraveled &gt;= <span class=\"keyword\">this</span>.distanceToTarget ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tcreateParticles( <span class=\"keyword\">this</span>.tx, <span class=\"keyword\">this</span>.ty );</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// remove the firework, use the index passed into the update function to determine which to remove</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\tfireworks.splice( index, <span class=\"number\">1</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"comment\">// target not reached, keep traveling</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.x += vx;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.y += vy;</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// draw firework</span></span><br><span class=\"line\"></span><br><span class=\"line\">Firework.prototype.draw = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.beginPath();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// move to the last tracked coordinate in the set, then draw a line to the current x and y</span></span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.moveTo( <span class=\"keyword\">this</span>.coordinates[ <span class=\"keyword\">this</span>.coordinates.length - <span class=\"number\">1</span>][ <span class=\"number\">0</span> ], <span class=\"keyword\">this</span>.coordinates[ <span class=\"keyword\">this</span>.coordinates.length - <span class=\"number\">1</span>][ <span class=\"number\">1</span> ] );</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.lineTo( <span class=\"keyword\">this</span>.x, <span class=\"keyword\">this</span>.y );</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.strokeStyle = <span class=\"string\">'hsl('</span> + hue + <span class=\"string\">', 100%, '</span> + <span class=\"keyword\">this</span>.brightness + <span class=\"string\">'%)'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.beginPath();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// draw the target for this firework with a pulsing circle</span></span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.arc( <span class=\"keyword\">this</span>.tx, <span class=\"keyword\">this</span>.ty, <span class=\"keyword\">this</span>.targetRadius, <span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.PI * <span class=\"number\">2</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// create particle</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Particle</span>(<span class=\"params\"> x, y </span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.x = x;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.y = y;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// track the past coordinates of each particle to create a trail effect, increase the coordinate count to create more prominent trails</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.coordinates = [];</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.coordinateCount = <span class=\"number\">5</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">while</span>( <span class=\"keyword\">this</span>.coordinateCount-- ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.coordinates.push( [ <span class=\"keyword\">this</span>.x, <span class=\"keyword\">this</span>.y ] );</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// set a random angle in all possible directions, in radians</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.angle = random( <span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.PI * <span class=\"number\">2</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.speed = random( <span class=\"number\">1</span>, <span class=\"number\">10</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// friction will slow the particle down</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.friction = <span class=\"number\">0.95</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// gravity will be applied and pull the particle down</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.gravity = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// set the hue to a random number +-20 of the overall hue variable</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.hue = random( hue - <span class=\"number\">20</span>, hue + <span class=\"number\">20</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.brightness = random( <span class=\"number\">50</span>, <span class=\"number\">80</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.alpha = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// set how fast the particle fades out</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.decay = random( <span class=\"number\">0.015</span>, <span class=\"number\">0.03</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// update particle</span></span><br><span class=\"line\"></span><br><span class=\"line\">Particle.prototype.update = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> index </span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// remove last item in coordinates array</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.coordinates.pop();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// add current coordinates to the start of the array</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.coordinates.unshift( [ <span class=\"keyword\">this</span>.x, <span class=\"keyword\">this</span>.y ] );</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// slow down the particle</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.speed *= <span class=\"keyword\">this</span>.friction;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// apply velocity</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.x += <span class=\"built_in\">Math</span>.cos( <span class=\"keyword\">this</span>.angle ) * <span class=\"keyword\">this</span>.speed;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.y += <span class=\"built_in\">Math</span>.sin( <span class=\"keyword\">this</span>.angle ) * <span class=\"keyword\">this</span>.speed + <span class=\"keyword\">this</span>.gravity;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// fade out the particle</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.alpha -= <span class=\"keyword\">this</span>.decay;</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// remove the particle once the alpha is low enough, based on the passed in index</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>( <span class=\"keyword\">this</span>.alpha &lt;= <span class=\"keyword\">this</span>.decay ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tparticles.splice( index, <span class=\"number\">1</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// draw particle</span></span><br><span class=\"line\"></span><br><span class=\"line\">Particle.prototype.draw = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx. beginPath();</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// move to the last tracked coordinates in the set, then draw a line to the current x and y</span></span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.moveTo( <span class=\"keyword\">this</span>.coordinates[ <span class=\"keyword\">this</span>.coordinates.length - <span class=\"number\">1</span> ][ <span class=\"number\">0</span> ], <span class=\"keyword\">this</span>.coordinates[ <span class=\"keyword\">this</span>.coordinates.length - <span class=\"number\">1</span> ][ <span class=\"number\">1</span> ] );</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.lineTo( <span class=\"keyword\">this</span>.x, <span class=\"keyword\">this</span>.y );</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.strokeStyle = <span class=\"string\">'hsla('</span> + <span class=\"keyword\">this</span>.hue + <span class=\"string\">', 100%, '</span> + <span class=\"keyword\">this</span>.brightness + <span class=\"string\">'%, '</span> + <span class=\"keyword\">this</span>.alpha + <span class=\"string\">')'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.stroke();</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// create particle group/explosion</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createParticles</span>(<span class=\"params\"> x, y </span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// increase the particle count for a bigger explosion, beware of the canvas performance hit with the increased particles though</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> particleCount = <span class=\"number\">30</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">while</span>( particleCount-- ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tparticles.push( <span class=\"keyword\">new</span> Particle( x, y ) );</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// main demo loop</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loop</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// this function will run endlessly with requestAnimationFrame</span></span><br><span class=\"line\"></span><br><span class=\"line\">\trequestAnimFrame( loop );</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// increase the hue to get different colored fireworks over time</span></span><br><span class=\"line\"></span><br><span class=\"line\">\thue += <span class=\"number\">0.5</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// normally, clearRect() would be used to clear the canvas</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// we want to create a trailing effect though</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// setting the composite operation to destination-out will allow us to clear the canvas at a specific opacity, rather than wiping it entirely</span></span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.globalCompositeOperation = <span class=\"string\">'destination-out'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// decrease the alpha property to create more prominent trails</span></span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.fillStyle = <span class=\"string\">'rgba(0, 0, 0, 0.5)'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.fillRect( <span class=\"number\">0</span>, <span class=\"number\">0</span>, cw, ch );</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// change the composite operation back to our main mode</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// lighter creates bright highlight points as the fireworks and particles overlap each other</span></span><br><span class=\"line\"></span><br><span class=\"line\">\tctx.globalCompositeOperation = <span class=\"string\">'lighter'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// loop over each firework, draw it, update it</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> i = fireworks.length;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">while</span>( i-- ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tfireworks[ i ].draw();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tfireworks[ i ].update( i );</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// loop over each particle, draw it, update it</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">var</span> i = particles.length;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">while</span>( i-- ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tparticles[ i ].draw();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tparticles[ i ].update( i );</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// launch fireworks automatically to random coordinates, when the mouse isn't down</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>( timerTick &gt;= timerTotal ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>( !mousedown ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"comment\">// start the firework at the bottom middle of the screen, then set the random target coordinates, the random y coordinates will be set within the range of the top half of the screen</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tfireworks.push( <span class=\"keyword\">new</span> Firework( cw / <span class=\"number\">2</span>, ch, random( <span class=\"number\">0</span>, cw ), random( <span class=\"number\">0</span>, ch / <span class=\"number\">2</span> ) ) );</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\ttimerTick = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\ttimerTick++;</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">// limit the rate at which fireworks get launched when mouse is down</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span>( limiterTick &gt;= limiterTotal ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>( mousedown ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"comment\">// start the firework at the bottom middle of the screen, then set the current mouse coordinates as the target</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tfireworks.push( <span class=\"keyword\">new</span> Firework( cw / <span class=\"number\">2</span>, ch, mx, my ) );</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\tlimiterTick = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tlimiterTick++;</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// mouse event bindings</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// update the mouse coordinates on mousemove</span></span><br><span class=\"line\"></span><br><span class=\"line\">canvas.addEventListener( <span class=\"string\">'mousemove'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> e </span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tmx = e.pageX - canvas.offsetLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">\tmy = e.pageY - canvas.offsetTop;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// toggle mousedown state and prevent canvas from being selected</span></span><br><span class=\"line\"></span><br><span class=\"line\">canvas.addEventListener( <span class=\"string\">'mousedown'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> e </span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\te.preventDefault();</span><br><span class=\"line\"></span><br><span class=\"line\">\tmousedown = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">canvas.addEventListener( <span class=\"string\">'mouseup'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> e </span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\te.preventDefault();</span><br><span class=\"line\"></span><br><span class=\"line\">\tmousedown = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// once the window loads, we are ready for some fireworks!</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.onload = loop;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure>\n","categories":[],"tags":["canvas"]},{"title":"面试中一些模糊的问题","url":"http://weileilei.top/面试中一些模糊的问题/","content":"<p>今天去手百部门进行了一些面试，有些东西好久不用真的会慢慢的生疏，我把面试中遇到的一些问题我回答上的还有没有回答上的都列出来（需要写代码的部分必须要完全手写出来），让自己铭记有些东西不复习一下再简单也会忘的。本文对提到的问题并不是深刻的解析，对一些问题以后会另开专题学习。</p>\n<h2 id=\"CSS有几种盒模型？\"><a href=\"#CSS有几种盒模型？\" class=\"headerlink\" title=\"CSS有几种盒模型？\"></a>CSS有几种盒模型？</h2><p>盒模型一共有两种模式，一种是标准模式，另一种就是怪异模式。</p>\n<p>我们都知道当你建立html的时候都会生成一个<code>DOCTYPE</code>标签，而且知道<code>DOCTYPE</code>标签表示的是标准文档类型<br>比如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE HTML PUBLIC  <span class=\"string\">\"-//W3C//DTD HTML 4.01 Transitional//EN\"</span>  <span class=\"string\">\"http://www.w3.org/TR/html4/loose.dtd\"</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>然而如果我们没有声明<code>DOCTYPE</code>的话，在IE6、IE7、IE8就会触发<code>怪异模式</code>。<br>在标准模式下的盒模型就是我们平常认知的盒模型。但是在怪异模式下，盒子的总宽度是包含内边距padding和边框border的。如果不好认知的话，我们可以用css3的<code>box-sizing</code>来举例。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">box-sizing</span>: <span class=\"selector-tag\">content-box</span></span><br><span class=\"line\">// 这是标准模式计算的</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">box-sizing</span>: <span class=\"selector-tag\">border-box</span></span><br><span class=\"line\">// 这是怪异模式计算的</span><br></pre></td></tr></table></figure>\n<h2 id=\"前端如何解决跨域问题？有几种做法\"><a href=\"#前端如何解决跨域问题？有几种做法\" class=\"headerlink\" title=\"前端如何解决跨域问题？有几种做法?\"></a>前端如何解决跨域问题？有几种做法?</h2><h3 id=\"为什么要用跨域？\"><a href=\"#为什么要用跨域？\" class=\"headerlink\" title=\"为什么要用跨域？\"></a>为什么要用跨域？</h3><p>了解了同源策略（同域名、同协议、同端口）的话就知道为什么要跨域了。<br>要知道<code>&lt;img&gt;</code>的src、<code>&lt;link&gt;</code>的href、<code>&lt;script&gt;</code>的src这三个都不遵循同源策略，所以可以用他们来考虑跨域，jsonp就是使用的<code>&lt;script&gt;</code>标签实现的</p>\n<p>JSONP由两部分组成：回调函数和数据。回调函数是当响应到来时应该在页面中调用的函数。回调函数的名字一般是在请求中指定的。而数据就是传入回调函数中的 JSON 数据。</p>\n<p>在写src的路径时要传入你自己设定的<code>callback</code>函数，页面中的<code>callback</code>的参数就是响应的数据。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>JSONP实现跨域2<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"mydiv\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">\"btn\"</span>&gt;</span>点击<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleResponse</span>(<span class=\"params\">response</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">console</span>.log(response);</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> oBtn = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'btn'</span>);</span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">    oBtn.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;     </span></span><br><span class=\"line\"><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> script = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"script\"</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">        script.src = <span class=\"string\">\"https://api.douban.com/v2/book/search?q=javascript&amp;count=1&amp;callback=handleResponse\"</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">document</span>.body.insertBefore(script, <span class=\"built_in\">document</span>.body.firstChild);   </span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;;</span></span><br><span class=\"line\"><span class=\"undefined\">&#125;;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>首先JSONP的安全问题不好保证，其次不容易确定JSONP的请求是否失败。但是如果接口中没有callback函数的接口我们要如何判断请求呢？那我们可以了解一下<code>CORS(跨域资源共享)</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span>  (request.from === jsonp) ? callback(data) : data ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"什么是CORS？\"><a href=\"#什么是CORS？\" class=\"headerlink\" title=\"什么是CORS？\"></a>什么是CORS？</h3><p><a href=\"https://yq.aliyun.com/articles/69313\" target=\"_blank\" rel=\"noopener\">CORS</a>：Cross-Origin Resource Sharing 跨源资源共享</p>\n<h2 id=\"vue的双向绑定原理？view到model，model到view是如何变化的？\"><a href=\"#vue的双向绑定原理？view到model，model到view是如何变化的？\" class=\"headerlink\" title=\"vue的双向绑定原理？view到model，model到view是如何变化的？\"></a>vue的双向绑定原理？view到model，model到view是如何变化的？</h2><p>需要长期总结不能应付面试</p>\n<h2 id=\"jQuery的源码？对源码的理解与运行机制？\"><a href=\"#jQuery的源码？对源码的理解与运行机制？\" class=\"headerlink\" title=\"jQuery的源码？对源码的理解与运行机制？\"></a>jQuery的源码？对源码的理解与运行机制？</h2><p>需要长期的总结</p>\n<h2 id=\"webpack源码？\"><a href=\"#webpack源码？\" class=\"headerlink\" title=\"webpack源码？\"></a>webpack源码？</h2><p>需要长期的总结</p>\n<h2 id=\"如何做到前端节流？\"><a href=\"#如何做到前端节流？\" class=\"headerlink\" title=\"如何做到前端节流？\"></a>如何做到前端节流？</h2><h3 id=\"什么是前端函数节流？\"><a href=\"#什么是前端函数节流？\" class=\"headerlink\" title=\"什么是前端函数节流？\"></a>什么是前端函数节流？</h3><p>通俗点说，就是让你的计算机不那么高效率的使用你的函数。比如当我们进行拖拽时，我们要一直监听用户鼠标事件，这样非常消耗计算机的性能，如果性能过高很有可能使你的浏览器崩溃。</p>\n<h3 id=\"如何进行函数节流？\"><a href=\"#如何进行函数节流？\" class=\"headerlink\" title=\"如何进行函数节流？\"></a>如何进行函数节流？</h3><p>进行函数节流的方法就是加上定时器。首先，触发函数时先加上setTimeout,如果在某个你设定的时间段内进行了连续调用，我就会把之前的定时器clear，再setTimeout。</p>\n<h2 id=\"vue的父子传参以及vuex的使用？项目中最常用的方法\"><a href=\"#vue的父子传参以及vuex的使用？项目中最常用的方法\" class=\"headerlink\" title=\"vue的父子传参以及vuex的使用？项目中最常用的方法\"></a>vue的父子传参以及vuex的使用？项目中最常用的方法</h2><p>简答：<br>1.父传子可以直接在父组件中用变量传递给子组件，子组件通过props接收。<br>2.子组件可以通过$emit发送事件以及value从而传递给父组件。<br>3.provide可以向你的子孙组件中深度的传参，子孙组件中用inject来接收并且可以设置默认值。<br>4.建立空vue来传参（个人感觉很low）<br>5.vuex</p>\n<h2 id=\"ES6中async和promise的用法\"><a href=\"#ES6中async和promise的用法\" class=\"headerlink\" title=\"ES6中async和promise的用法\"></a>ES6中async和promise的用法</h2><p>需要长期总结</p>\n<h2 id=\"闭包的优点与缺点，写出事例：给每个li便签加点击事件，点击后输出对应的index？\"><a href=\"#闭包的优点与缺点，写出事例：给每个li便签加点击事件，点击后输出对应的index？\" class=\"headerlink\" title=\"闭包的优点与缺点，写出事例：给每个li便签加点击事件，点击后输出对应的index？\"></a>闭包的优点与缺点，写出事例：给每个li便签加点击事件，点击后输出对应的index？</h2><h3 id=\"什么是闭包？\"><a href=\"#什么是闭包？\" class=\"headerlink\" title=\"什么是闭包？\"></a>什么是闭包？</h3><p>首先要了解闭包就要知道javascript语言特有的‘链式作用域’结构。可以想象成为一个很自私的家族，作为儿子我可以开爸爸的汽车，而爸爸却不能开我的车。闭包就是为了解决这个问题，闭包就是能够读取其他函数内部变量的函数。由于在Javascript语言中，只有函数内部的子函数才能读取局部变量，因此可以把闭包简单理解成”定义在一个函数内部的函数”。</p>\n<h2 id=\"模块化思想？seaJs与requireJs的一些区别-转\"><a href=\"#模块化思想？seaJs与requireJs的一些区别-转\" class=\"headerlink\" title=\"模块化思想？seaJs与requireJs的一些区别?(转)\"></a>模块化思想？<code>seaJs</code>与<code>requireJs</code>的一些区别?(转)</h2><p>模块化的开发方式可以提高代码复用率，方便进行代码的管理。通常一个文件就是一个模块，有自己的作用域，只向外暴露特定的变量和函数。目前流行的js模块化规范有CommonJS、AMD、CMD以及ES6的模块系统。</p>\n<h3 id=\"一、CommonJS\"><a href=\"#一、CommonJS\" class=\"headerlink\" title=\"一、CommonJS\"></a>一、CommonJS</h3><p>Node.js是commonJS规范的主要实践者，它有四个重要的环境变量为模块化的实现提供支持：<code>module</code>、<code>exports</code>、<code>require</code>、<code>global</code>。实际使用时，用<code>module.exports</code>定义当前模块对外输出的接口（不推荐直接用<code>exports</code>），用<code>require</code>加载模块。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 定义模块math.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> basicNum = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123; <span class=\"comment\">//在这里写上需要向外暴露的函数、变量</span></span><br><span class=\"line\">  add: add,</span><br><span class=\"line\">  basicNum: basicNum</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 引用自定义的模块时，参数包含路径，可省略.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> math = <span class=\"built_in\">require</span>(<span class=\"string\">'./math'</span>);</span><br><span class=\"line\">math.add(<span class=\"number\">2</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 引用核心模块时，不需要带路径</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);</span><br><span class=\"line\">http.createService(...).listen(<span class=\"number\">3000</span>);</span><br></pre></td></tr></table></figure>\n<p>commonJS用同步的方式加载模块。在服务端，模块文件都存在本地磁盘，读取非常快，所以这样做不会有问题。但是在浏览器端，限于网络原因，更合理的方案是使用异步加载。</p>\n<h3 id=\"二、AMD和require-js\"><a href=\"#二、AMD和require-js\" class=\"headerlink\" title=\"二、AMD和require.js\"></a>二、AMD和require.js</h3><p>AMD规范采用异步方式加载模块，模块的加载不影响它后面语句的运行。所有依赖这个模块的语句，都定义在一个回调函数中，等到加载完成之后，这个回调函数才会运行。这里介绍用<code>require.js</code>实现AMD规范的模块化：用<code>require.config()</code>指定引用路径等，用<code>define()</code>定义模块，用<code>require()</code>加载模块。</p>\n<p>首先我们需要引入<code>require.js</code>文件和一个入口文件<code>main.js</code>。<code>main.js</code>中配置<code>require.config()</code>并规定项目中用到的基础模块</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/** 网页中引入require.js及main.js **/</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"js/require.js\"</span> <span class=\"attr\">data-main</span>=<span class=\"string\">\"js/main\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** main.js 入口文件/主模块 **/</span></span><br><span class=\"line\"><span class=\"comment\">// 首先用config()指定各模块路径和引用名</span></span><br><span class=\"line\"><span class=\"built_in\">require</span>.config(&#123;</span><br><span class=\"line\">  baseUrl: <span class=\"string\">\"js/lib\"</span>,</span><br><span class=\"line\">  paths: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"jquery\"</span>: <span class=\"string\">\"jquery.min\"</span>,  <span class=\"comment\">//实际路径为js/lib/jquery.min.js</span></span><br><span class=\"line\">    <span class=\"string\">\"underscore\"</span>: <span class=\"string\">\"underscore.min\"</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// 执行基本操作</span></span><br><span class=\"line\"><span class=\"built_in\">require</span>([<span class=\"string\">\"jquery\"</span>,<span class=\"string\">\"underscore\"</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$, _</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// some code here</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>引用模块的时候，我们将模块名放在[]中作为reqiure()的第一参数；如果我们定义的模块本身也依赖其他模块,那就需要将它们放在[]中作为define()的第一参数。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 定义math.js模块</span></span><br><span class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> basicNum = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> add = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">x, y</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        add: add,</span><br><span class=\"line\">        basicNum :basicNum</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// 定义一个依赖underscore.js的模块</span></span><br><span class=\"line\">define([<span class=\"string\">'underscore'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">_</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> classify = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">list</span>)</span>&#123;</span><br><span class=\"line\">    _.countBy(list, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">num</span>)</span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> num &gt; <span class=\"number\">30</span> ? <span class=\"string\">'old'</span> : <span class=\"string\">'young'</span>;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    classify :classify</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 引用模块，将模块放在[]内</span></span><br><span class=\"line\"><span class=\"built_in\">require</span>([<span class=\"string\">'jquery'</span>, <span class=\"string\">'math'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$, math</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> sum = math.add(<span class=\"number\">10</span>, <span class=\"number\">20</span>);</span><br><span class=\"line\">  $(<span class=\"string\">\"#sum\"</span>).html(sum);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"三、CMD和sea-js\"><a href=\"#三、CMD和sea-js\" class=\"headerlink\" title=\"三、CMD和sea.js\"></a>三、CMD和sea.js</h3><p>require.js在申明依赖的模块时会在第一之间加载并执行模块内的代码：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define([<span class=\"string\">\"a\"</span>, <span class=\"string\">\"b\"</span>, <span class=\"string\">\"c\"</span>, <span class=\"string\">\"d\"</span>, <span class=\"string\">\"e\"</span>, <span class=\"string\">\"f\"</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b, c, d, e, f</span>) </span>&#123; </span><br><span class=\"line\">    <span class=\"comment\">// 等于在最前面声明并初始化了要用到的所有模块</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"literal\">false</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 即便没用到某个模块 b，但 b 还是提前执行了</span></span><br><span class=\"line\">      b.foo()</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>CMD是另一种js模块化方案，它与AMD很类似，不同点在于：AMD 推崇依赖前置、提前执行，CMD推崇依赖就近、延迟执行。此规范其实是在sea.js推广过程中产生的。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** AMD写法 **/</span></span><br><span class=\"line\">define([<span class=\"string\">\"a\"</span>, <span class=\"string\">\"b\"</span>, <span class=\"string\">\"c\"</span>, <span class=\"string\">\"d\"</span>, <span class=\"string\">\"e\"</span>, <span class=\"string\">\"f\"</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b, c, d, e, f</span>) </span>&#123; </span><br><span class=\"line\">     <span class=\"comment\">// 等于在最前面声明并初始化了要用到的所有模块</span></span><br><span class=\"line\">    a.doSomething();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"literal\">false</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 即便没用到某个模块 b，但 b 还是提前执行了</span></span><br><span class=\"line\">        b.doSomething()</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** CMD写法 **/</span></span><br><span class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require, exports, module</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"built_in\">require</span>(<span class=\"string\">'./a'</span>); <span class=\"comment\">//在需要时申明</span></span><br><span class=\"line\">    a.doSomething();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"literal\">false</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> b = <span class=\"built_in\">require</span>(<span class=\"string\">'./b'</span>);</span><br><span class=\"line\">        b.doSomething();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** sea.js **/</span></span><br><span class=\"line\"><span class=\"comment\">// 定义模块 math.js</span></span><br><span class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require, exports, module</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $ = <span class=\"built_in\">require</span>(<span class=\"string\">'jquery.js'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> add = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    exports.add = add;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// 加载模块</span></span><br><span class=\"line\">seajs.use([<span class=\"string\">'math.js'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">math</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> sum = math.add(<span class=\"number\">1</span> + <span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"四、ES6-Module\"><a href=\"#四、ES6-Module\" class=\"headerlink\" title=\"四、ES6 Module\"></a>四、ES6 Module</h3><p>ES6 在语言标准的层面上，实现了模块功能，而且实现得相当简单，旨在成为浏览器和服务器通用的模块解决方案。其模块功能主要由两个命令构成：<code>export</code>和<code>import</code>。<code>export</code>命令用于规定模块的对外接口，import命令用于输入其他模块提供的功能。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** 定义模块 math.js **/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> basicNum = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> add = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; basicNum, add &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** 引用模块 **/</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; basicNum, add &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./math'</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\">ele</span>) </span>&#123;</span><br><span class=\"line\">    ele.textContent = add(<span class=\"number\">99</span> + basicNum);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>如上例所示，使用<code>import</code>命令的时候，用户需要知道所要加载的变量名或函数名。其实ES6还提供了<code>export default</code>命令，为模块指定默认输出，对应的<code>import</code>语句不需要使用大括号。这也更趋近于ADM的引用写法。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** export default **/</span></span><br><span class=\"line\"><span class=\"comment\">//定义输出</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123; basicNum, add &#125;;</span><br><span class=\"line\"><span class=\"comment\">//引入</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> math <span class=\"keyword\">from</span> <span class=\"string\">'./math'</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\">ele</span>) </span>&#123;</span><br><span class=\"line\">    ele.textContent = math.add(<span class=\"number\">99</span> + math.basicNum);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ES6的模块不是对象，import命令会被 JavaScript 引擎静态分析，在编译时就引入模块代码，而不是在代码运行时加载，所以无法实现条件加载。也正因为这个，使得静态分析成为可能。</p>\n<h3 id=\"五、-ES6-模块与-CommonJS-模块的差异\"><a href=\"#五、-ES6-模块与-CommonJS-模块的差异\" class=\"headerlink\" title=\"五、 ES6 模块与 CommonJS 模块的差异\"></a>五、 ES6 模块与 CommonJS 模块的差异</h3><h4 id=\"1-CommonJS-模块输出的是一个值的拷贝，ES6-模块输出的是值的引用。\"><a href=\"#1-CommonJS-模块输出的是一个值的拷贝，ES6-模块输出的是值的引用。\" class=\"headerlink\" title=\"1. CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。\"></a>1. CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。</h4><ul>\n<li><p>CommonJS 模块输出的是值的拷贝，也就是说，一旦输出一个值，模块内部的变化就影响不到这个值。</p>\n</li>\n<li><p>ES6 模块的运行机制与 CommonJS 不一样。JS 引擎对脚本静态分析的时候，遇到模块加载命令import，就会生成一个只读引用。等到脚本真正执行时，再根据这个只读引用，到被加载的那个模块里面去取值。换句话说，ES6 的import有点像 Unix 系统的“符号连接”，原始值变了，import加载的值也会跟着变。因此，ES6 模块是动态引用，并且不会缓存值，模块里面的变量绑定其所在的模块。</p>\n</li>\n</ul>\n<h4 id=\"2-CommonJS-模块是运行时加载，ES6-模块是编译时输出接口。\"><a href=\"#2-CommonJS-模块是运行时加载，ES6-模块是编译时输出接口。\" class=\"headerlink\" title=\"2. CommonJS 模块是运行时加载，ES6 模块是编译时输出接口。\"></a>2. CommonJS 模块是运行时加载，ES6 模块是编译时输出接口。</h4><ul>\n<li><p>运行时加载: CommonJS 模块就是对象；即在输入时是先加载整个模块，生成一个对象，然后再从这个对象上面读取方法，这种加载称为“运行时加载”。</p>\n</li>\n<li><p>编译时加载: ES6 模块不是对象，而是通过 export 命令显式指定输出的代码，import时采用静态命令的形式。即在import时可以指定加载某个输出值，而不是加载整个模块，这种加载称为“编译时加载”。</p>\n</li>\n</ul>\n<h2 id=\"写一个person-39-li-39-39-lei-39-的类要求\"><a href=\"#写一个person-39-li-39-39-lei-39-的类要求\" class=\"headerlink\" title=\"写一个person(&#39;li&#39;,&#39;lei&#39;)的类要求?\"></a>写一个<code>person(&#39;li&#39;,&#39;lei&#39;)</code>的类要求?</h2><p>问：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> person(<span class=\"string\">'li'</span>,<span class=\"string\">'lei'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.name);</span><br><span class=\"line\"><span class=\"comment\">// 输出 ‘li lei’</span></span><br><span class=\"line\"></span><br><span class=\"line\">person.name = <span class=\"string\">'li hua'</span>;</span><br><span class=\"line\"><span class=\"comment\">// 改变person的名字</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.firstName);</span><br><span class=\"line\"><span class=\"comment\">// 'li'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(person.lastName);</span><br><span class=\"line\"><span class=\"comment\">// 'hua'</span></span><br></pre></td></tr></table></figure>\n<p>答：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">person</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> (first, last) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.firstName = first;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.lastName = last;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  get name() &#123;</span><br><span class=\"line\">  \t<span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.firstName + <span class=\"string\">''</span> + <span class=\"keyword\">this</span>.lastName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  set name(fullName) &#123;</span><br><span class=\"line\">  \t<span class=\"keyword\">this</span>.firstName = fullName.split(<span class=\"string\">' '</span>)[<span class=\"number\">0</span>];</span><br><span class=\"line\">  \t<span class=\"keyword\">this</span>.lastName = fullName.split(<span class=\"string\">' '</span>)[<span class=\"number\">1</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","categories":[],"tags":["web"]},{"title":"ES6中async的使用","url":"http://weileilei.top/ES6中aysnc-await的使用/","content":"<p>在项目中有时会遇到异步操作的问题，async就是解决异步操作的终极操作。我会以终极三问（what，why，when）的形式来说明什么是async。由于这是第一篇文章不知道怎么写，有很大部分是借鉴阮一峰老的原文，事例将会从我的项目中摘取。</p>\n<h2 id=\"async是什么？\"><a href=\"#async是什么？\" class=\"headerlink\" title=\"async是什么？\"></a>async是什么？</h2><h3 id=\"官方例子\"><a href=\"#官方例子\" class=\"headerlink\" title=\"官方例子\"></a>官方例子</h3><p><a href=\"http://es6.ruanyifeng.com/#docs/async\" target=\"_blank\" rel=\"noopener\">官方文档</a></p>\n<p>async相当于对Generator 函数的一个语法糖</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> readFile = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">fileName</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">    fs.readFile(fileName, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, data</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error) <span class=\"keyword\">return</span> reject(error);</span><br><span class=\"line\">      resolve(data);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> gen = <span class=\"function\"><span class=\"keyword\">function</span>* (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> f1 = <span class=\"keyword\">yield</span> readFile(<span class=\"string\">'/etc/fstab'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> f2 = <span class=\"keyword\">yield</span> readFile(<span class=\"string\">'/etc/shells'</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(f1.toString());</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(f2.toString());</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>用async函数就换成了 </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> asyncReadFile = <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> f1 = <span class=\"keyword\">await</span> readFile(<span class=\"string\">'/etc/fstab'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> f2 = <span class=\"keyword\">await</span> readFile(<span class=\"string\">'/etc/shells'</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(f1.toString());</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(f2.toString());</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>那async与Genetator有什么区别呢？我自己的理解就是，更简单，更语义化，而且会自动执行。</p>\n<p>(1)自动执行</p>\n<blockquote>\n<p>我们知道 <code>generator</code> 函数需要通过调用<code>next()</code>方法，才能往后执行到下一个<code>yield</code>，但是<code>async</code>函数却不需要，它能够自动向后执行。</p>\n</blockquote>\n<p>(2) 更语义化</p>\n<blockquote>\n<p><code>async</code>和<code>await</code>，比起星号和<code>yield</code>，语义更清楚了。<code>async</code>表示函数里有异步操作，<code>await</code>表示紧跟在后面的表达式需要等待结果。</p>\n</blockquote>\n<p>(3) 更广的适用性</p>\n<blockquote>\n<p><code>yield</code>命令后面只能跟随<code>Trunk</code>或<code>Promise</code>，但是<code>await</code>后面除了可以是<code>Promise</code>，也可以是普通类型，但是这样就和同步没有任何区别了。</p>\n</blockquote>\n<p>(4) 返回值不同</p>\n<blockquote>\n<p><code>generator</code>返回的是一个遍历器对象，而<code>async</code>返回的是一个<code>Promise</code>对象</p>\n</blockquote>\n<h2 id=\"async怎么用？\"><a href=\"#async怎么用？\" class=\"headerlink\" title=\"async怎么用？\"></a>async怎么用？</h2><p>await 命令</p>\n<p>await语句后面的 Promise 变为reject，那么整个async函数都会中断执行。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.reject(<span class=\"string\">'出错了'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'hello world'</span>); <span class=\"comment\">// 不会执行</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>要知道的是async返回的是一个<code>Promise</code>对象，后面可以使用<code>then</code>方法添加回调</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getStockPriceByName</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> symbol = <span class=\"keyword\">await</span> getStockSymbol(name);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> stockPrice = <span class=\"keyword\">await</span> getStockPrice(symbol);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> stockPrice;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">getStockPriceByName(<span class=\"string\">'goog'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(result);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>也可以使用<code>catch</code>方法捕捉错误信息,然而使用时需要注意<code>catch</code>的一些使用方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.reject(<span class=\"string\">'出错了'</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span>(e) &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'hello world'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">f()</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"params\">v</span> =&gt;</span> <span class=\"built_in\">console</span>.log(v))</span><br><span class=\"line\"><span class=\"comment\">// 如果不想因为第一个异步失败，而中断后面的异步操作</span></span><br><span class=\"line\"><span class=\"comment\">// hello world</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.reject(<span class=\"string\">'出错了'</span>)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> <span class=\"built_in\">console</span>.log(e));</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'hello world'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">f()</span><br><span class=\"line\">.then(<span class=\"function\"><span class=\"params\">v</span> =&gt;</span> <span class=\"built_in\">console</span>.log(v))</span><br><span class=\"line\"><span class=\"comment\">// 原因同上</span></span><br><span class=\"line\"><span class=\"comment\">// 出错了</span></span><br><span class=\"line\"><span class=\"comment\">// hello world</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"项目中的案例\"><a href=\"#项目中的案例\" class=\"headerlink\" title=\"项目中的案例\"></a>项目中的案例</h2><p>案例背景：复合报表（项目功能之一）<br>复合报表是由用户来进行配置高自由度的展现报表，用户可以配置模块(组件)之间的查询条件以及共有参数、私有参数，来展示一个多功能查询，展示数据工具。<br>（因涉及公司产品产权问题不进行细节介绍）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">methods: &#123;</span><br><span class=\"line\">  checkAllReady() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.$watch(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">this</span>.allReady &amp;&amp; <span class=\"keyword\">this</span>.publicAllReady,</span><br><span class=\"line\">        val =&gt; &#123;</span><br><span class=\"line\">          val ? resolve(val) : reject(val);</span><br><span class=\"line\">        &#125;, &#123;<span class=\"attr\">immediate</span>: <span class=\"literal\">true</span>&#125;);</span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"params\">val</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> p.resolve(val);</span><br><span class=\"line\">    &#125;).catch(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'组件的参数还没准备好'</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"keyword\">async</span> getData() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> <span class=\"keyword\">this</span>.checkAllReady();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = <span class=\"keyword\">this</span>.parseApi(<span class=\"keyword\">this</span>.option.api);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> publicParams = <span class=\"keyword\">this</span>.blocks.getParams();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> id = <span class=\"keyword\">this</span>.option.f_id;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.loading = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.showChart = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    api.get(url, $.extend(&#123;id&#125;,publicParams,<span class=\"keyword\">this</span>.getParams())).then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (data.code) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.loading = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$message.error(data.msg);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'remote-data-completed'</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (data.data.is_sync_query_mode) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.renderChart(data.data);</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.loading = <span class=\"literal\">false</span>;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.$emit(<span class=\"string\">'remote-data-completed'</span>,data);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">const</span> taskId = data.data.id;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.getStatus(taskId);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":[],"tags":["ES6"]},{"title":"Hello World","url":"http://weileilei.top/hello-world/","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","categories":[],"tags":[]},{"title":"关于","url":"http://weileilei.top/about/index.html","content":"","categories":[],"tags":[]},{"title":"分类","url":"http://weileilei.top/category/index.html","content":"","categories":[],"tags":[]},{"title":"","url":"http://weileilei.top/css/page-home.css","content":"html.page-home {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: url('/images/homepage2.jpg');\n  background-color: transparent;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n\n  /*background: linear-gradient( #1abc9c, transparent), linear-gradient( 90deg, skyblue, transparent), linear-gradient( -90deg, coral, transparent);*/\n  /*background-blend-mode: screen;*/\n\n  /*background: linear-gradient(to left, #5f2c82, #49a09d);*/\n}\nhtml.page-archives {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: url('/images/blogpage2.jpg');\n  background-color: transparent;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n}\nhtml.page-tag,html.page-category,html.page-about {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: url('/images/blogpage2.jpg');\n  background-color: transparent;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n}","categories":[],"tags":[]},{"title":"搜索","url":"http://weileilei.top/search/index.html","content":"","categories":[],"tags":[]},{"title":"标签","url":"http://weileilei.top/tag/index.html","content":"","categories":[],"tags":[]}]